# Формат метаданных

Описание формы представляет собою объект, в корне которого всегда находится поле `fields`. 

```js
{
  "fields": [ ]
}
```

## Мета-описание отдельного поля

Каждый элемент массива `field` содержит мета-описание одного поля формы. В своей минимальной конфигурации такое мета-описание выглядит следующим образом:

```js
{
  "id": "%id поля%",
}
```

Это эквивалентно следующему мета-описанию:

```js
{
  "id": "%id поля%",
  "renderer": "text"
}
```

где `renderer` - это тип [контрола](https://en.wikipedia.org/wiki/Widget_(GUI)), который будет использован для отрисовки данного поля на форме.


### Простейшая форма описания отрисовщика

Поле `renderer` может содержать любое тип отрисовщика (*renderer*), однако такой тип должен быть определён в наборе отрисовщиков, подключенных к компоненту `<GeneratedForm>`. Изначально `react-ui-generator` поддерживат два набора отрисовщиков: один на базе компонентов Reactstrap, и второй - на базе компонентов Ant Design. Для Ant Design доступны следующие типы отрисовщиков:

```js
{
  "id": "%id поля%",
  "renderer": "text|textarea|checkbox|radiogroup|select|button|datepicker|upload"
}
```

### Расширенная форма описания отрисовщика

Приведенный выше вариант мета-описания поля подходит только для самых простых случаев. Гораздо чаще отрисовщик нуждается в дополнительных настройках (напр. "цвет кнопки", "формат даты" etc). Для такого случая используется следующий формат мета-описания поля:

```js
{
  "id": "%id поля%",
  "renderer": {
    "type": "%тип визуального представления поля%",
    "config": {
      "option1": "value1",
      ...
      "optionN": "valueN"
    }
  }
}
```

Где содержимое секции `config` не является строго регламентированным и может содержать любые настройки, которые понимает/поддерживает данный отрисовщик. Конкретный набор настроек для того или иного отрисовщика содержится в описании API соответствующего набора компонентов.

### Видимость поля

Любое поле формы может быть скрыто, независимо от выбранного типа отрисовщика. Решение об отображении/скрытии поля принимается до вызова отрисовщика поля, и в случае скрытия - такого вызова просто не происходит. Управляется видимость поля с помощью настройки `hidden`:

```js
{
  "id": "%id поля%",
  "renderer": "" | { ... },
  ...
  "hidden": true|false
}
```

### Выключенность поля

Любое поле может быть выключено (*disabled*), независимо от выбранного типа отрисовщика. Здесь имеется ввиду, что никакие взаимодействия с данными полем (*actions*) не будут обрабатьываться компонентом `<GeneratedForm>`. Однако, т.к. визуализация поля в выключенном состоянии - это ответственность отрисовщика данного типа поля, то нет возможности гарантировать на уровне компонента `<GeneratedForm>` что такая визуализация будет всегда корректной. Например, если автор отрисовщика забудет предусмотреть визуализацию состояния `disabled`, то поле будет выглядеть как активное.

Управляется состояние выключенности с помощью настройки `disabled`:

```js
{
  "id": "%id поля%",
  "renderer": "" | { ... },
  ...
  "disabled": true|false
}
```

### Настройка взаимодействия с полем (actions)

Мета-описание формы в `react-ui-generator` является декларативным. Таким образом, не предполагается возможности описания логики полей прямо в метаданных. Вместо этого есть возможность указать, какие функции из коллекции функций, подключенных к `<GeneratedForm>` должны вызываться при срабатывании того или иного события компонента:

```js
{
  "id": "%id поля%",
  "renderer": "button",
  ...
  "actions": {
    "onClick": "sendForm"
  }
}
```

При этом, к компоненту `<GeneratedForm>` должна быть подключена коллекция функций, содержащая функцию с именем "sendForm":

```js
  const actions = {
    sendForm: (event) => { ... },
    ...
  };

  ...

  <GeneratedForm ... actions={actions} />
```

### Полный пример

Итого, метаописание всей формы будет иметь слелующую структуру:

```js
{
  "fields": [
    {
      "id": "%id поля%",
      "renderer": {
        "type": "%тип визуального представления поля%",
        "config": {
          "option1": "value1",
          ...
          "optionN": "valueN"
        }
      }
    },
    "hidden": true|false,
    "disabled": true|false,
    "serializer": "some.nested.field",
    "actions": {
      "onClick": "...",
      "onKeyUp": "...",
      ...
    }
  ]
}
```
